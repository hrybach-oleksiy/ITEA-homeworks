{"version":3,"file":"js/goods.5e2a2c6f89c991a5ddb1.js","mappings":";;;;;;;;;;;AAAA;;;;;;;;;;;;;;;ACAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA,0EAA0E,KAAK;AAC/E;AACA;AACA;;AAEA;AACA,0EAA0E,KAAK;AAC/E;AACA;AACA;AACA;;;;;;;;;;;;;;;;AClBoD;;AAEpD,8BAA8B,gEAAY;;AAE1C;;AAEe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AClEuC;AACH;AACU;AACR;;AAEtC;AACA;AACA;AACA;AACA;;AAEA,0BAA0B,qDAAQ;AAClC,sBAAsB,wDAAI;AAC1B,2BAA2B,6DAAS;AACpC,4BAA4B,yDAAK;;AAEjC;;AAEe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,UAAU;AACjC;AACA,4DAA4D,WAAW,IAAI,WAAW;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,uBAAuB,SAAS,WAAW;AAC3E;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,wDAAwD,gBAAgB;AACxE,wDAAwD,oBAAoB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,IAAI;AACvD;AACA;;;;;;;;;;;;;;AClMA;AACA;AACA;;AAEe;AACf;AACA;AACA;;AAEA;AACA;AACA,gDAAgD,SAAS,UAAU,KAAK;AACxE;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;ACnBe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACnB4B;;AAE5B;AACoC;;AAEpC,sBAAsB,wDAAI;;AAEX,wBAAwB,8CAAK;AAC5C;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,uBAAuB,SAAS,WAAW;AAC/F;AACA;AACA,mDAAmD,UAAU;AAC7D,6EAA6E,WAAW;AACxF;AACA,4EAA4E,QAAQ;AACpF,uFAAuF,oBAAoB;AAC3G,yFAAyF,8BAA8B;AACvH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;;;;;UCnEA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;;ACNqB;;AAErB;;;AAGA,CAAsC;AACQ;AACM;AACd;AACF;;AAEpC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,2BAA2B,6DAAS;AACpC,4BAA4B,yDAAK;AACjC,8BAA8B,gEAAY;AAC1C,uBAAuB,yDAAK;AAC5B,sBAAsB,wDAAI;;AAE1B;;AAEA;;AAEA;AACA;AACA;AACA,CAAC","sources":["webpack:///./scss/goods.scss?88f6","webpack:///./js/api/StoreApi.js","webpack:///./js/components/Cart.js","webpack:///./js/components/Goods.js","webpack:///./js/components/Notification.js","webpack:///./js/components/Popup.js","webpack:///./js/components/PopupCart.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./js/goods.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","export default class StoreApi {\n    async getGoods() {\n        let url = 'https://my-json-server.typicode.com/OlhaKlymas/json-lesson/goods';\n        let response = await fetch(url);\n        return response.json();\n    }\n\n    async getPosts(page) {\n        let url = `https://gorest.co.in/public/v2/posts?per_page=2&page=${page}`;\n        let response = await fetch(url);\n        return response.json();\n    }\n\n    async getTodos(page) {\n        let url = `https://gorest.co.in/public/v2/todos?per_page=5&page=${page}`;\n        let response = await fetch(url);\n        return response.json();\n    }\n}\n","import Notification from '@components/Notification';\n\nconst classNotification = new Notification();\n\nconst headerCount = document.querySelector('.js-header-count');\n\nexport default class Cart {\n    init() {\n        let ids = this.getAddedProducts();\n        this._setCount(ids.length);\n    }\n\n    addToCart(btn, parentClass = '.js-product') {\n        let parent = this._getParent(btn, parentClass);\n        let id = parent.dataset.id;\n        let deleteButton = parent.querySelector('.js-delete-item');\n        deleteButton.classList.remove('hidden');\n\n        let tileTitle = parent.querySelector('.tile__title').innerText;\n        let addedToCartProducts = this.getAddedProducts();\n        addedToCartProducts.push(id);\n        this._setProductsToCart(addedToCartProducts)\n        this._setCount(addedToCartProducts.length);\n        classNotification.show(tileTitle, 'додано');\n    }\n\n    removeFromCart(btn, parentClass, isPopup) {\n        let parent = this._getParent(btn, parentClass);\n        let id = parent.dataset.id;\n\n        let addedToCartProducts = this.getAddedProducts();\n        let newProductsList = addedToCartProducts.filter((item) => item != id);\n        this._setProductsToCart(newProductsList);\n        this._setCount(newProductsList.length);\n        if(!isPopup) {\n            let deleteButton = parent.querySelector('.js-delete-item');\n            let tileTitle = parent.querySelector('.tile__title').innerText;\n            deleteButton.classList.add('hidden');\n            classNotification.show(tileTitle, 'видалено');\n        } else {\n            let products = document.querySelectorAll('.js-product');\n            products.forEach(product => {\n                if(product.dataset.id === id) {\n                    let deleteButton = product.querySelector('.js-delete-item');\n                    deleteButton.classList.add('hidden');\n                }\n            })\n        }\n    }\n\n    _getParent(btn, parentClass) {\n        let parent = btn.closest(parentClass);\n        return parent;\n    }\n\n    getAddedProducts() {\n        return localStorage.getItem('cart')?.split(', ') || [];\n    }\n\n    _setProductsToCart(arr) {\n        arr.length > 0 ? localStorage.setItem('cart', arr.join(', ')) : localStorage.removeItem('cart');\n    }\n\n    _setCount(num) {\n        headerCount.innerText = num;\n    }\n}","import StoreApi from '../api/StoreApi';\nimport Cart from '@components/Cart';\nimport PopupCart from '@components/PopupCart';\nimport Popup from '@components/Popup';\n\nconst filterSelect = document.querySelector('.js-goods-filter');\nconst sortInputs = document.querySelectorAll('.js-goods-sort');\nconst headerCount = document.querySelector('.js-header-count');\nconst popupCart = document.querySelector('.js-popup-cart');\nconst popupOrder = document.querySelector('.js-popup-order');\n\nconst classStoreApi = new StoreApi();\nconst classCart = new Cart();\nconst classPopupCart = new PopupCart(popupCart);\nconst classPopupOrder = new Popup(popupOrder);\n\nconst ids = classCart.getAddedProducts();\n\nexport default class Goods {\n    getSearchParams(key) {\n        let currentUrl = window.location;\n        let url = new URL(currentUrl);\n        let params = new URLSearchParams(url.search);\n        let search = params.get(key);\n    \n        if(search) {\n            this._setCurrentOption(search);\n        }\n        \n        classStoreApi.getGoods().then(result => {\n            this._showProducts(result, search);\n            this._setSort(result);\n            this._setFilter(result);\n            this._showDeleteButton(ids);\n            this._setBtnProductsEvent();\n            this._setCountEvent(result);\n        })\n    }\n\n    _showProducts(goods, filterBy){\n        let productList = document.querySelector('.product-list');\n        productList.innerHTML = '';\n    \n        switch(filterBy) {\n            case 'all': \n                goods = [...goods];\n                break;\n            case 'new':\n            case 'sale':\n                goods = goods.filter(item => item.badge === filterBy);\n                break;\n            case 'low-price':\n                goods = goods.filter(item => item.price.current <= 1000);\n                break;\n            case 'high-price':\n                goods = goods.filter(item => item.price.current > 1000);\n                break;\n        }\n    \n        goods.forEach(item => {\n            const article = document.createElement('article');\n            article.classList.add('product-list__item', 'tile', 'js-product');\n            article.setAttribute('data-id', item.id);\n    \n            article.innerHTML = `\n            <a href=\"${item.href}\" class=\"tile__link\">\n                <span class=\"tile__top\">\n                    <span class=\"tile__badge tile__badge--${item.badge}\">${item.badge}</span>\n                    <span class=\"tile__delete hidden js-delete-item\"> \n                        <svg width=\"15\" height=\"15\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                            <g clip-path=\"url(#clip0_6043_11153)\">\n                            <path d=\"M2.03125 3.85352H12.9687\" stroke=\"#EF3E33\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                            <path d=\"M11.753 3.85352V12.3605C11.753 12.9681 11.1454 13.5757 10.5378 13.5757H4.46137C3.85373 13.5757 3.24609 12.9681 3.24609 12.3605V3.85352\" stroke=\"#EF3E33\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                            <path d=\"M5.06934 3.85341V2.63813C5.06934 2.03049 5.67697 1.42285 6.28461 1.42285H8.71517C9.32281 1.42285 9.93045 2.03049 9.93045 2.63813V3.85341\" stroke=\"#EF3E33\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                            </g>\n                            <defs>\n                            <clipPath id=\"clip0_6043_11153\">\n                            <rect width=\"14.5833\" height=\"14.5833\" fill=\"white\" transform=\"translate(0.208008 0.208008)\"/>\n                            </clipPath>\n                            </defs>\n                        </svg>\n                    </span>\n                </span>\n                <span class=\"tile__image\">\n                    <img src=\"${item.images[0].preview}\" alt=\"${item.title}\">\n                </span>\n                <span class=\"tile__title\">${item.title}</span>\n                <span class=\"tile__info\">\n                    <span class=\"tile__price\">\n                        <span class=\"tile__old-price\">${item.price.old} ₴</span>\n                        <span class=\"tile__new-price\">${item.price.current} ₴</span>\n                    </span>\n                    <button class=\"btn js-add-to-cart-btn\">Купити</button>\n                </span>\n            </a>\n        `;\n            productList.appendChild(article);\n        })\n    }\n\n    _setSort(arr){\n        sortInputs.forEach(input => input.addEventListener('change', (e) => this._sortProducts(e, arr)))\n    }\n\n    _setFilter(arr){\n        filterSelect.addEventListener('change', e => this._getFilteredProducts(e, arr))\n    }\n\n    _showDeleteButton(ids) {\n        let products = document.querySelectorAll('.js-product');\n        products.forEach(function (product) {\n            if (ids.includes(product.dataset.id)) {\n                let deleteButton = product.querySelector('.js-delete-item');\n                deleteButton.classList.remove('hidden');\n            }\n        })\n    }\n    \n    _setCountEvent(products) {\n        headerCount.addEventListener('click', () => {\n            let addedToCartProducts = classCart.getAddedProducts()\n            if(addedToCartProducts.length > 0) {\n                classPopupCart.show(addedToCartProducts, products);\n            }\n        });\n    }\n\n    _setBtnProductsEvent() {\n        let deleteButtons = document.querySelectorAll('.js-delete-item');\n        let addToCartButtons = document.querySelectorAll('.js-add-to-cart-btn');\n    \n        deleteButtons.forEach((btn) => {\n            btn.addEventListener('click', (e) => {\n                e.preventDefault();\n                classCart.removeFromCart(btn, '.product-list__item');\n            })\n        });\n    \n        addToCartButtons.forEach((button) => {\n            button.addEventListener('click', (e) => {\n                e.preventDefault();\n                classCart.addToCart(button);\n            })\n        });\n    }\n\n    _sortProducts(e, products) {\n        let value = e.target.value;\n        let sortedProducts = [...products]\n    \n        switch(value) {\n            case 'price':\n                sortedProducts = products.sort((a, b) => a.price.current > b.price.current ? 1 : -1);\n                break;\n            case 'alphabet':\n                sortedProducts = products.sort((a, b) => a.title > b.title ? 1 : -1);\n                break;\n        }\n        \n        this.showProducts(sortedProducts)\n    }\n\n    _getFilteredProducts(e, products) {\n        let value = e.target.value;\n        let filteredProducts = null;\n    \n        if(value == 'all') {\n            this._setSearchParams('filter', '')\n            filteredProducts = [...products];\n        } else {\n            this._setSearchParams('filter', value)\n            filteredProducts = products.filter(item => item.tag_list.includes(value))\n        }\n    \n        this._showProducts(filteredProducts)\n    }\n    \n    _setSearchParams(key, value) {\n        let currentUrl = window.location;\n        let url = new URL(currentUrl);\n        let params = new URLSearchParams(url.search);\n        \n        if(value === '') {\n            params.delete(key);\n        } else {\n            params.set(key, value);\n        }\n        url.search = params.toString();\n        window.location.href = url.toString();\n    }\n    \n    _setCurrentOption(val){\n        filterSelect.querySelector(`option[value=${val}]`).setAttribute('selected', 'selected')\n    }\n}","const notification = document.querySelector('.js-notification');\nconst notificationText = document.querySelector('.js-notification-content');\n// const notificationClose = document.querySelector('.js-notification-close');\n\nexport default class Notification {\n    constructor() {\n        this.activeClass = 'notification--active'\n    }\n\n    show(product, text) {\n        notification.classList.add(this.activeClass);\n        notificationText.innerText = `Продукт ${product} успішно ${text}!`\n        setTimeout(() => this.hide(), 3000);\n        // notificationClose.addEventListener('click', () => this.hide())\n    }\n\n    hide() {\n        notification.classList.remove(this.activeClass);\n    }\n}","export default class Popup {\n    constructor(el){\n        this.el = el,\n        this.closeBtn = this.el.querySelector('.js-popup-close'),\n        this.activeClass = 'popup--active'\n    }\n\n    hide() {\n        this.el.classList.remove(this.activeClass);\n    }\n\n    show() {\n        this.el.classList.add(this.activeClass);\n        this._setCloseBtnEvent();\n    }\n\n    _setCloseBtnEvent() {\n        this.closeBtn.addEventListener('click', () => this.hide());\n    }\n}","import Popup from './Popup';\n\nconst popupCartList = document.querySelector('.js-popup-cart-list');\nimport Cart from '@components/Cart';\n\nconst classCart = new Cart();\n\nexport default class PopupCart extends Popup {\n    constructor(el) {\n        super(el)\n\n        this.cartList = this.el.querySelector('.js-popup-cart-list')\n    }\n\n    show(ids, goods) {\n        super.show();\n\n        this.cartList.innerHTML = '';\n        goods.forEach(item => {\n            if(ids.includes(String(item.id))) {\n                let filtered = ids.filter(el => el === String(item.id));\n                let counter = filtered.length;\n                let itemList = document.createElement('li');\n                itemList.className = \"popup-cart__list-item cart-item\";\n                itemList.dataset.id = item.id;\n                itemList.innerHTML = `<span class=\"cart-item__img\">\n                                        <img src=\"${item.images[0].preview}\" alt=\"${item.title}\">\n                                    </span>\n                                    <span class=\"cart-item__info\">\n                                        <a href=\"${item.href}\" class=\"cart-item__link\">\n                                            <span class=\"cart-item__title\">${item.title}</span>\n                                            <span class=\"cart-item__price\">\n                                                <span class=\"tile__count\">${counter}</span>\n                                                <span class=\"tile__price\">Вартість - ${item.price.current} ₴</span>\n                                                <span class=\"tile__total-price\">Сума - ${item.price.current * counter} ₴</span>\n                                            </span>\n                                        </a>\n                                    </span>\n                                    <span class=\"cart-item__remove js-cart-remove\">\n                                        <svg width=\"15\" height=\"15\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                                            <g clip-path=\"url(#clip0_6043_11153)\">\n                                            <path d=\"M2.03125 3.85352H12.9687\" stroke=\"#EF3E33\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                                            <path d=\"M11.753 3.85352V12.3605C11.753 12.9681 11.1454 13.5757 10.5378 13.5757H4.46137C3.85373 13.5757 3.24609 12.9681 3.24609 12.3605V3.85352\" stroke=\"#EF3E33\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                                            <path d=\"M5.06934 3.85341V2.63813C5.06934 2.03049 5.67697 1.42285 6.28461 1.42285H8.71517C9.32281 1.42285 9.93045 2.03049 9.93045 2.63813V3.85341\" stroke=\"#EF3E33\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                                            </g>\n                                            <defs>\n                                            <clipPath id=\"clip0_6043_11153\">\n                                            <rect width=\"14.5833\" height=\"14.5833\" fill=\"white\" transform=\"translate(0.208008 0.208008)\"/>\n                                            </clipPath>\n                                            </defs>\n                                        </svg>\n                                    </span>`;\n                popupCartList.appendChild(itemList);\n            }\n        });\n        this._setRemoveBtn();\n    }\n\n    _setRemoveBtn() {\n        let removeBtns = document.querySelectorAll('.js-cart-remove');\n    \n        removeBtns.forEach(btn => btn.addEventListener('click', function(){\n            let parent = btn.closest('.cart-item');\n            parent.classList.add('hidden');\n            classCart.removeFromCart(btn, '.cart-item', true)\n        }))\n    }\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import '@scss/goods';\n\nconsole.log('my goods')\n\n\nimport Popup from '@components/Popup';\nimport PopupCart from '@components/PopupCart';\nimport Notification from '@components/Notification';\nimport Goods from '@components/Goods';\nimport Cart from '@components/Cart';\n\nconsole.log('main')\n\nconst popupCart = document.querySelector('.js-popup-cart');\nconst popupOrder = document.querySelector('.js-popup-order');\nconst showOrderBtn = document.querySelector('.js-show-order');\n// const headerCount = document.querySelector('.js-header-count');\n// const notification = document.querySelector('.js-notification');\n// const notificationText = document.querySelector('.js-notification-content');\n\nconst classPopupCart = new PopupCart(popupCart);\nconst classPopupOrder = new Popup(popupOrder);\nconst classNotification = new Notification();\nconst classGoods = new Goods();\nconst classCart = new Cart();\n\nclassCart.init();\n\nclassGoods.getSearchParams('filter')\n\nshowOrderBtn.addEventListener('click', () => {\n    classPopupCart.hide();\n    classPopupOrder.show();\n})\n"],"names":[],"sourceRoot":""}